Check for optional values when using WithProviders component